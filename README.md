# ONNXMalwareDetection
TF2 to ML.NET

## Onnx model consumed by ML.NET
## Data sources:
[kaggle](https://www.kaggle.com/competitions/malware-detection/data)
## Target
- labels denoting positive, negative class 

## Production:
- Tensorflow NN (2 inputs - cat/num)
- 10 epochs, val_accuracy: 0.9855
- preprocessing - enc.pkl simple encoding of icat
- converted to Onnx format


# Consumption
- ML.NET built on linux (ubuntu 20.04)
- 
- 
```sh
dotnet new console -o <Project Name>
cd <Project Name>
dotnet add package Microsoft.ML
dotnet add package Microsoft.ML.OnnxRuntime
dotnet add package Microsoft.ML.OnnxTransformer

```
## Artifacts
Adding the artefact to the root of the project
Adding to <Project>.cproj

```sh
<ItemGroup>
    <None Include="model.onnx">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
</ItemGroup>
```
## Compile and run
```sh
dotnet run
```

## Publish
```sh
dotnet publish -r linux-x64 --self-contained true
```
## Trial with json example
```sh
dotnet <path to dll>/KASP/bin/Debug/net6.0/linux-x64/KASP.dll '{"Hard": [34, 35, 16, 4, 4, 5, 5, 6, 17, 9, 17, 9, 17, 9, 36, 18, 19, 20, 5, 12, 5, 4, 13, 17, 37, 38, 39, 4, 13], "Soft": [486400.0, 563712.0, 4544.0, 0.0, 8793797623808.0, 1064960.0, 1083854.0, 5.163, 2.115, 6.579, 174762.667, 2560.0, 486400.0, 174715.333, 2244.0, 485940.0, 430.0, 31.0, 3.913, 2.118, 7.977, 6812.493, 20.0, 104056.0]}'
```





